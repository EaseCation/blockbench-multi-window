# Blockbench多窗口插件

## 概述
多窗口（Multi Window）是一个强大的Blockbench插件，可实现多个Blockbench窗口之间的无缝同步。该插件允许您在多个窗口中打开同一个项目，并使所有更改实时同步到所有实例中。

这主要用于多屏工作站的使用场景，可以在一块屏幕中独立预览总体效果。

## 功能特点
- **多窗口支持**：在多个窗口中打开同一个项目
- **实时同步**：在一个窗口中所做的所有更改立即反映在其他窗口中
- **动画同步**：时间线位置、播放/暂停状态以及关键帧编辑均会同步
- **纹理同步**：纹理的更新会在所有窗口中反映
- **选择同步**：选中的对象在所有窗口中都会被高亮显示

## 工作原理
此插件使用一些高级的"黑魔法"技术来实现无缝同步：
- 利用Electron的IPC（进程间通信）机制
- 在窗口实例之间保持UUID一致性
- 实现了一个复杂的状态差异检测和补丁系统
- 使用事件驱动架构捕获并传播更改
- 采用自定义序列化方式高效传输模型数据

## 安装方法
1. 下载 `dist/multi-window.js` 文件
2. 打开Blockbench
3. 进入`文件 > 插件`
4. 点击"从文件加载插件"
5. 选择下载的`multi-window.js`文件
6. 重启Blockbench

## 构建
1. 克隆此仓库
2. 运行 `npm install` 安装依赖
3. 运行 `npm run build` 构建插件
4. 构建后的文件将位于 `dist` 目录中

## 使用指南

### 在另一个窗口中打开项目
1. 在Blockbench中打开一个项目
2. 进入`文件 > 在另一窗口打开`
3. 一个包含相同项目的新窗口将会打开

### 使用多窗口工作
- 您可以将窗口并排放置，同时查看模型的不同部分
- 在任何窗口中进行更改（添加元素、编辑纹理、更改动画等）
- 所有更改将同步到所有打开的窗口
- 您可以在每个窗口中使用不同的视图（例如，一个窗口编辑视图，另一个UV编辑器）

### 动画工作流程
- 在一个窗口中播放或暂停动画，状态将同步到其他窗口
- 在一个窗口中拖动时间线，位置会在所有窗口中更新
- 在任何窗口中编辑关键帧，更改会反映在所有地方

### 最佳实践
- 虽然插件很稳健，但建议不要在多个窗口中同时进行复杂更改
- 对于大型项目，限制同步窗口的数量以保持性能
- 像任何工作流程一样定期保存您的工作

## 局限性
- 某些复杂操作可能导致临时失去同步
- 在非常大的项目和多个窗口的情况下，性能可能会下降
- 某些第三方插件可能与多窗口功能不完全兼容

## 开发者信息
该插件使用魔法标识符系统来区分不同类型的同步数据：
- `sync-shared-data`：用于模型结构更改
- `sync-animation-frame`：用于时间线拖动
- `sync-animation-timeline`：用于动画播放状态

## 许可证
MIT许可证

## 作者
boybook